<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visor de Flujos</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="map"></div>

    <div class="ventana-flotante">
        <div class="seccion">
            <h1>Panel de Control del Mapa</h1>
            <p>Selecciona una cuenca, localidad y escenario para cargar los datos.</p>
        </div>

        <div class="seccion">
            <h2>
                <svg class="icono" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" fill="#1D2DFF"/>
                </svg>
                Selección de Ubicación
            </h2>
            <label for="cuenca">Cuenca:</label>
            <select id="cuenca">
                <option value="">Seleccione una cuenca</option>
            </select>

            <label for="localidad">Localidad:</label>
            <select id="localidad" disabled>
                <option value="">Seleccione una localidad</option>
            </select>

            <label for="escenario">Escenario:</label>
            <select id="escenario" disabled>
                <option value="">Seleccione un escenario</option>
            </select>
        </div>

        <div class="seccion">
            <h2>
                <svg class="icono" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                    <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z" fill="#1D2DFF"/>
                </svg>
                Capas Base
            </h2>
            <div class="capa-item">
                <label>
                    <input type="checkbox" checked id="toggle-subbasin">
                    <span>Subcuenca</span>
                </label>
                <input type="range" id="transparencia-subbasin" min="0" max="1" step="0.1" value="1">
            </div>
            <div class="capa-item">
                <label>
                    <input type="checkbox" checked id="toggle-topo">
                    <span>Topografía</span>
                </label>
                <input type="range" id="transparencia-topo" min="0" max="1" step="0.1" value="0.7">
            </div>
        </div>

        <div class="seccion">
            <h2>
                <svg class="icono" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                    <path d="M12 2L2 9l10 7 10-7-10-7zm0 3.3L17.74 9 12 12.7 6.26 9 12 5.3zM2 14l10 7 10-7-1.5-1-8.5 5.7-8.5-5.7L2 14z" fill="#1D2DFF"/>
                </svg>
                Capas de Escenario
            </h2>
            <div class="capa-item">
                <label>
                    <input type="checkbox" id="alturas" onchange="toggleCapa('depth')">
                    <span>Alturas Máximas</span>
                </label>
                <input type="range" id="transparencia-alturas" min="0" max="1" step="0.1" value="0.7">
            </div>
            <div class="capa-item">
                <label>
                    <input type="checkbox" id="velocidades" onchange="toggleCapa('velocity')">
                    <span>Velocidades Máximas</span>
                </label>
                <input type="range" id="transparencia-velocidades" min="0" max="1" step="0.1" value="0.7">
            </div>
        </div>

        <div class="seccion">
            <h2>
                <svg class="icono" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                    <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z" fill="#1D2DFF"/>
                </svg>
                Leyenda
            </h2>
            <div id="leyenda"></div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/geotiff@2.0.7/dist/geotiff.js"></script>
    <script src="https://unpkg.com/georaster"></script>
    <script src="https://unpkg.com/georaster-layer-for-leaflet"></script>
    <script src="https://unpkg.com/chroma-js@2.1.0/chroma.min.js"></script>
    <script src="script.js"></script>
</body>
</html>